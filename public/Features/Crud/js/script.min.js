var selectedRow=null;function onFormSubmit(){if(validateName()){var formData=readFormData();null==selectedRow?insertNewRecord(formData):updateRecord(formData),resetForm(),showHint("Form submitted successfully!","success")}}function readFormData(){var formData={};return formData.empId=document.getElementById("empId").value,formData.fullName=document.getElementById("fullName").value,formData.title=document.getElementById("title").value,formData.floor=document.getElementById("floor").value,formData}function insertNewRecord(data){var table=document.getElementById("employeeList").getElementsByTagName("tbody")[0],newRow=table.insertRow(table.length);cell1=newRow.insertCell(0),cell1.innerHTML=data.empId,cell2=newRow.insertCell(1),cell2.innerHTML=data.fullName,cell3=newRow.insertCell(2),cell3.innerHTML=data.title,cell4=newRow.insertCell(3),cell4.innerHTML=data.floor,cell5=newRow.insertCell(4),cell5.innerHTML='<a onClick="onEdit(this)">Edit</a>\n                        <a onClick="onDelete(this)">Delete</a>'}function resetForm(){document.getElementById("empId").value="",document.getElementById("fullName").value="",document.getElementById("title").value="",document.getElementById("floor").value="",selectedRow=null}function onEdit(td){selectedRow=td.parentElement.parentElement,document.getElementById("empId").value=selectedRow.cells[0].innerHTML,document.getElementById("fullName").value=selectedRow.cells[1].innerHTML,document.getElementById("title").value=selectedRow.cells[2].innerHTML,document.getElementById("floor").value=selectedRow.cells[3].innerHTML}function updateRecord(formData){selectedRow.cells[0].innerHTML=formData.empId,selectedRow.cells[1].innerHTML=formData.fullName,selectedRow.cells[2].innerHTML=formData.title,selectedRow.cells[3].innerHTML=formData.floor}function onDelete(td){confirm("Are you sure to delete this record ?")&&(row=td.parentElement.parentElement,document.getElementById("employeeList").deleteRow(row.rowIndex),resetForm())}function validateName(){return isValid=!0,""==document.getElementById("fullName").value?(isValid=!1,document.getElementById("fullNameValidationError").classList.remove("hide")):(isValid=!0,document.getElementById("fullNameValidationError").classList.contains("hide")||document.getElementById("fullNameValidationError").classList.add("hide")),isValid}function validateEmployeeNumber(){var empId=document.getElementById("empId");empId.value.length>6||empId.value.length<6?empId.setCustomValidity("Employee Number must be 6 digits"):isNaN(empId.value)?empId.setCustomValidity("Please enter a valid number."):empId.setCustomValidity("")}function validateFloor(){var floor=document.getElementById("floor");floor.value.length>2?floor.setCustomValidity("Employee Number must be 2 digits or less."):isNaN(floor.value)?floor.setCustomValidity("Please enter a valid number."):floor.setCustomValidity("")}function showHint(message,type="success"){var hintBox=document.getElementById("hintAlert");hintBox.innerHTML=message,hintBox.style.backgroundColor="success"===type?"#28a745":"error"===type?"#dc3545":"#ffc107",hintBox.classList.remove("hide"),hintBox.classList.add("show"),setTimeout((function(){hintBox.classList.remove("show"),hintBox.classList.add("hide")}),3e3)}document.getElementById("saveBtn").addEventListener("click",(function(){for(var employeeData=[],table=document.getElementById("employeeList").getElementsByTagName("tbody")[0],i=0;i<table.rows.length;i++){var row=table.rows[i],data={empId:row.cells[0].innerHTML,fullName:row.cells[1].innerHTML,title:row.cells[2].innerHTML,floor:row.cells[3].innerHTML};employeeData.push(data)}var timestamp=(new Date).toISOString(),jsonData_timestamp=timestamp,jsonData_employees=employeeData,json=JSON.stringify(employeeData,null,2),blob=new Blob([json],{type:"application/json"}),link=document.createElement("a");link.href=URL.createObjectURL(blob),link.download="employees_"+timestamp+".json",link.click()})),document.getElementById("loadDataBtn").addEventListener("click",(function(){var fileInput=document.createElement("input");fileInput.type="file",fileInput.accept=".json",fileInput.addEventListener("change",(function(event){var file=event.target.files[0];if(file){var reader=new FileReader;reader.onload=function(e){try{var jsonData=JSON.parse(e.target.result);if(jsonData&&jsonData.employees){var tableBody=document.getElementById("employeeList").getElementsByTagName("tbody")[0];tableBody.innerHTML="",jsonData.employees.forEach((function(employee){var newRow=tableBody.insertRow(tableBody.length),cell1,cell2,cell3,cell4,cell5;newRow.insertCell(0).innerHTML=employee.empId,newRow.insertCell(1).innerHTML=employee.fullName,newRow.insertCell(2).innerHTML=employee.title,newRow.insertCell(3).innerHTML=employee.floor,newRow.insertCell(4).innerHTML='<a onClick="onEdit(this)">Edit</a>\n                                                <a onClick="onDelete(this)">Delete</a>'}))}else alert('"Invalid JSON format. \'employees\' key is missing."\n                        {\n                        "employees":[\n                            {\n                            "empId":12345,\n                            ...}\n                        ]\n                    }')}catch(err){showHint("Error reading the JSON file: "+err.message,"error")}},reader.readAsText(file)}})),fileInput.click()}));